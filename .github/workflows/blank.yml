name: Using Artifacts in actions

on: workflow_dispatch

jobs:

  job1_create:
    runs-on: ubuntu-latest
    steps:
      - name: Create file
        run: echo "barath" > artifacts.txt

      - name: Pass file to next job
        uses: actions/upload-artifact@v4
        with:
          name: temp   # temporary artifact
          path: artifacts.txt


  job2_add_waj:
    runs-on: ubuntu-latest
    needs: job1_create
    steps:
      - name: Download file
        uses: actions/download-artifact@v4
        with:
          name: temp
          path: .

      - name: Add "waj"
        run: echo "waj" >> artifacts.txt

      - name: Upload updated temp for next job
        uses: actions/upload-artifact@v4
        with:
          name: temp        
          overwrite: true   
          path: artifacts.txt


  job3_add_K:
    runs-on: ubuntu-latest
    needs: job2_add_waj
    steps:
      - name: Download file
        uses: actions/download-artifact@v4
        with:
          name: temp
          path: .

      - name: Add "K"
        run: echo "K" >> artifacts.txt

      - name: Print file
        run: cat artifacts.txt

      - name:  FINAL artifact
        uses: actions/upload-artifact@v4
        with:
          name: my-final-artifact   # ‚Üê This is your ONLY real artifact
          path: artifacts.txt
